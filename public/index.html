
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé∞ Lucky Spin</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
 
</head>

 <style>
    * {
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }


   body {
  margin: 0;
  padding: 20px;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #1a1a1a, #2c2c2c);
  background-size: 400% 400%;
  color: #fff;
  text-align: center;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding-bottom: 50px;
  animation: softGradient 20s ease infinite;
}



   h1 {
  margin: 30px 0 10px;
  font-size: 3rem;
  color: #ffd700;
  text-shadow: 0 0 10px #ffcc00, 0 0 20px #ff9900, 0 0 30px #cc6600;
  font-weight: 900;
  letter-spacing: 2px;
}



    .wallet, .result, .history, .notification, .bet-section {
  background: linear-gradient(145deg, #222, #111);
  border-radius: 15px;
  padding: 20px;
  margin: 20px 0;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
  width: 90%;
  max-width: 700px;
  border: 1px solid #ffd700;
}


    .wallet {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .wallet input {
      padding: 10px;
      font-size: 1em;
      width: 150px;
      margin: 5px;
      border-radius: 8px;
      border: none;
    }

    button {
  padding: 12px 20px;
  margin: 5px;
  font-size: 1em;
  font-weight: bold;
  border: 2px solid #ffd700;
  border-radius: 12px;
  background: linear-gradient(145deg, #ffcc00, #cc9900);
  color: #000;
  cursor: pointer;
  box-shadow: 0 0 10px #ffd700, inset 0 0 5px #fff;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px #fff000, inset 0 0 5px #fff;
}


    .notification {
      margin-top: 10px;
      color: #00ff95;
      font-weight: 600;
    }

    .bet-section {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 15px;
}

  .bet-box {
  flex: 1 0 calc(25% - 15px);
  max-width: calc(25% - 15px);
  background: linear-gradient(145deg, #ffd700, #ffcc00); /* v√†ng kim */
  border: 2px solid #fff8dc;
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.6), inset 0 0 5px rgba(255, 255, 255, 0.4);
  transition: all 0.3s ease;
  color: #000; /* ƒë·ªÉ ch·ªØ v√† input r√µ h∆°n tr√™n n·ªÅn v√†ng */
}

.bet-box .icon {
  font-size: 2.5rem;  /* icon to h∆°n */
  display: block;
  margin-bottom: 5px;
}

.bet-box:hover {
  transform: scale(1.02);
  box-shadow: 0 0 20px rgba(255, 223, 0, 0.9), inset 0 0 8px rgba(255, 255, 255, 0.6);
}

@media (max-width: 768px) 
{
  .bet-box {
    flex: 1 0 calc(50% - 15px);
    max-width: calc(50% - 15px);
  }
}
    .bet-box label {
      display: flex;
      flex-direction: column;
      font-weight: 600;
    }

    .bet-box input {
      margin-top: 5px;
      padding: 5px;
      font-size: 1em;
      border-radius: 8px;
      border: none;
      text-align: center;
    }

    .result {
      font-size: 1.3em;
      font-weight: 600;
      border: 2px solid #f0c330;
    }

    .history {
      text-align: left;
      font-size: 0.95em;
      background: #1d1d2c;
      overflow-y: auto;
      max-height: 200px;
    }

.time-display {
  margin-top: 10px;
  font-size: 1.3rem;
  font-weight: bold;
  color: #ffcc00;
  text-shadow: 0 0 5px #fff000;
}


@keyframes smallWinFlash {
  0%, 100% { background-color: transparent; }
  50% { background-color: rgba(0, 255, 100, 0.3); }
}

@keyframes bigWinFlash {
  0%, 100% { background-color: transparent; transform: scale(1); }
  50% {
    background-color: rgba(255, 255, 0, 0.4);
    transform: scale(1.2);
  }
}

.small-win-effect {
  animation: smallWinFlash 1s ease-in-out 2;
  border: 2px solid #00ff95 !important;
}

.big-win-effect {
  animation: bigWinFlash 0.8s ease-in-out 3;
  border: 3px solid #ffd700 !important;
}



#jackpotEffect {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  overflow: hidden;
}

/* Coin bay */
.coin {
  position: absolute;
  width: 30px;
  height: 30px;
  background-image: url('https://cdn-icons-png.flaticon.com/512/138/138292.png');
  background-size: contain;
  background-repeat: no-repeat;
  animation: flyCoin 1.5s ease-out forwards;
}

@keyframes flyCoin {
  0% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x), var(--y)) scale(1.3) rotate(720deg);
    opacity: 0;
  }
}

/* Firework burst nhi·ªÅu m√†u */
.firework {
  position: absolute;
  width: 10px;
  height: 10px;
  background-color: var(--color);
  border-radius: 50%;
  animation: firework 1s ease-out forwards;
}

@keyframes firework {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(6);
    opacity: 0;
  }
}

/* M∆∞a xu */
.rain-coin {
  position: absolute;
  top: -50px;
  width: 24px;
  height: 24px;
  background-image: url('https://cdn-icons-png.flaticon.com/512/138/138292.png');
  background-size: contain;
  background-repeat: no-repeat;
  animation: coinRain linear forwards;
}

@keyframes coinRain {
  to {
    transform: translateY(120vh) rotate(720deg);
    opacity: 0;
  }
}


@keyframes softGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}


@keyframes spinShake {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(3deg); }
  50% { transform: rotate(-3deg); }
  75% { transform: rotate(3deg); }
  100% { transform: rotate(0deg); }
}
.spin-animating {
  animation: spinShake 0.2s ease-in-out infinite;
}


#jackpotProgress {
  height: 15px;
  border-radius: 10px;
  border: 1px solid #ffd700;
  background-color: #333;
}

#jackpotProgress::-webkit-progress-value {
  background-color: gold;
  border-radius: 10px;
}


@keyframes luxuryFlash {
  0% {
    box-shadow: 0 0 0px gold, inset 0 0 0px #fff;
    background: rgba(255, 215, 0, 0.05);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 15px 5px gold, inset 0 0 10px #fff8dc;
    background: rgba(255, 215, 0, 0.1);
    transform: scale(1.03);
  }
  100% {
    box-shadow: 0 0 0px gold, inset 0 0 0px #fff;
    background: rgba(255, 215, 0, 0.05);
    transform: scale(1);
  }
}

.bet-box.highlight-win {
  animation: luxuryFlash 1s ease-in-out 3;
  border: 2px solid gold;
  border-radius: 12px;
  transition: all 0.3s ease;
  position: relative;
  z-index: 2;
}




.glow {
  box-shadow: 0 0 20px 5px #ffd700, inset 0 0 10px #fff;
  animation: pulseGlow 1s infinite alternate;
}

@keyframes pulseGlow {
  0% { box-shadow: 0 0 10px #ffd700; }
  100% { box-shadow: 0 0 25px #fff000; }
}


#wheel-container {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 30px auto;
}

#wheel {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 5px solid gold;
  position: relative;
  transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
  background: repeating-conic-gradient(#f8c200 0deg 45deg, #ffe680 45deg 90deg);
  overflow: hidden;
}

#wheel .segment {
  position: absolute;
  width: 50%;
  height: 50%;
  top: 50%;
  left: 50%;
  transform-origin: 0% 0%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.6em;
  font-weight: bold;
  color: #000;
  padding-left: 75px; /* gi√∫p icon kh√¥ng b·ªã ra s√°t vi·ªÅn */
 
}


#pointer {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
}

.game-container {
  border: 4px solid gold;
  border-radius: 20px;
  padding: 20px;
  margin: 40px auto;
  max-width: 1200px;
  background: #000;  /* N·ªÄN ƒêEN */
  box-shadow: 0 0 25px 5px gold, inset 0 0 15px #fff5cc;
  display: flex;
  flex-direction: row; /* <-- CHIA NGANG */
  gap: 25px;
  justify-content: space-between;
  align-items: flex-start;
  border-radius: 20px;    /* bo g√≥c ƒë·∫πp h∆°n */
}

/* B√™n tr√°i (v√≤ng quay + k·∫øt qu·∫£) */
.left-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
}

/* B√™n ph·∫£i (c∆∞·ª£c + v√≠ + l·ªãch s·ª≠) */
.right-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 15px;
}


/* Cho m√†n h√¨nh nh·ªè th√¨ t·ª± ƒë·ªông xu·ªëng h√†ng */
@media (max-width: 900px) {
  .game-container {
    flex-direction: column;
    align-items: center;
  }
}


@keyframes blink {
  0% { opacity: 1; }
  50% { opacity: 0; }
  100% { opacity: 1; }
}

.blink {
  color: red !important;
  animation: blink 1s infinite;
}


@keyframes blinkYellow {
  0% { color: gold; opacity: 1; }
  50% { color: orange; opacity: 0.3; }
  100% { color: gold; opacity: 1; }
}

.blink-yellow {
  animation: blinkYellow 1s infinite;
  font-weight: bold;
}

#spinCounter {
  margin: 10px 0;
  font-weight: bold;
  color: #ffcc00;
}

.chip-selector {
  display: flex !important;        /* √©p bu·ªôc d√πng flex */
  flex-direction: row !important;  /* x·∫øp h√†ng ngang */
  justify-content: center;         /* cƒÉn gi·ªØa ngang */
  align-items: center;             /* cƒÉn gi·ªØa d·ªçc */
  gap: 15px;                       /* kho·∫£ng c√°ch gi·ªØa chip */
  margin: 20px 0;
}

.chip {
  flex: 0 0 auto; /* ƒë·∫£m b·∫£o kh√¥ng b·ªã co d·ªçc */
  width: 70px;
  height: 70px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, gold, orange);
  color: #222;
  font-weight: bold;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  transition: transform 0.2s, border 0.2s;
}

.chip:hover {
  transform: scale(1.15);
}

.chip.active {
  border: 4px solid red;
  transform: scale(1.2);
}


#betForm {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 15px;
}
.bet-cell {
  flex: 1 1 22%;
  padding: 10px;
  background: #f9f9f9;
  border: 2px solid #ccc;
  border-radius: 10px;
  text-align: center;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}
.bet-cell:hover {
  background: #e8ffe8;
  border-color: #6c3;
}
.bet-amount {
  display: block;
  font-size: 14px;
  margin-top: 5px;
  color: #333;
}


.lock-bets {
  pointer-events: none;
  opacity: 0.5;
}

#bankInfo {
  background: linear-gradient(145deg, #111, #222);
  border: 2px solid gold;
  border-radius: 12px;
  padding: 15px;
  color: #fff;
  font-size: 1.1em;
  box-shadow: 0 0 15px rgba(255,215,0,0.3);
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to   { opacity: 1; transform: translateY(0); }
}

#withdrawPanel {
  background: linear-gradient(145deg, #111, #222);
  border: 2px solid gold;
  border-radius: 12px;
  padding: 15px;
  color: #fff;
  font-size: 1.1em;
  box-shadow: 0 0 15px rgba(255,215,0,0.3);
  animation: fadeIn 0.5s ease;
}

/* Icon trong l·ªãch s·ª≠ k·∫øt qu·∫£ */
.history .result-item {
  font-size: 1.8rem;   /* tƒÉng k√≠ch th∆∞·ªõc icon */
  margin: 3px;       /* t·∫°o kho·∫£ng c√°ch gi·ªØa c√°c icon */
  display: inline-block;
}

/* Icon trong √¥ hi·ªÉn th·ªã k·∫øt qu·∫£ ch√≠nh */
.result-display {
  font-size: 4rem;   /* tƒÉng k√≠ch th∆∞·ªõc icon k·∫øt qu·∫£ */
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}


  </style>
</head>
<body>
 <div class="game-container">
 <div class="left-panel">
 <h1>üíéLucky Spinüíé</h1>
 <div class="time-display">üïí <span id="currentTime">--:--:--</span></div>

<div class = result>
<div id="spinCounter">üéØ Phi√™n quay: 0</div>
<div id="wheel-container">
  <div id="wheel">
</div>
</div>


<div id="autoCountdown" style="margin-top:10px; font-weight:bold; color:#00ff95;">
  ‚è≥ Quay th∆∞·ªüng sau: <span id="countdownValue"></span> gi√¢y
</div>
<div class="result" id="result">K·∫øt qu·∫£ tr·∫£ th∆∞·ªüng...</div>
<div class="history" id="history">üßæ <b>L·ªãch s·ª≠ k·∫øt qu·∫£:</b><br></div>

<div id="suggestion" style="font-weight:bold; color:#00ccff; margin:10px 0;">
 üî• Hot: H·∫ø th·ªëng ƒëang ph√¢n t√≠ch...
 </div>
</div>





 <form id="betForm" class="bet-section">
  <div class="bet-box" data-name="Chua"><span class="icon">üçÖ</span><span class="bet-amount">0</span><br><small>Win 5 times</small></div>  
  <div class="bet-box" data-name="C·∫£i"><span class="icon">ü•¨</span><span class="bet-amount">0</span><br><small>Win 5 times</small></div>  
  <div class="bet-box" data-name="Ng√¥"><span class="icon">üåΩ</span><span class="bet-amount">0</span><br><small>Win 5 times</small></div>  
  <div class="bet-box" data-name="R·ªët"><span class="icon">ü•ï</span><span class="bet-amount">0</span><br><small>Win 5 times</small></div>  
  <div class="bet-box" data-name="M·ª≥"><span class="icon">üå≠</span><span class="bet-amount">0</span><br><small>Win 10 times</small></div>
  <div class="bet-box" data-name="Xi√™n"><span class="icon">üç¢</span><span class="bet-amount">0</span><br><small>Win 15 times</small></div>
  <div class="bet-box" data-name="ƒê√πi"><span class="icon">üçñ</span><span class="bet-amount">0</span><br><small>Win 25 times</small></div>
  <div class="bet-box" data-name="B√≤"><span class="icon">ü•©</span><span class="bet-amount">0</span><br><small>Win 45 times</small></div>

  <div class="chip-selector">
    <div class="chip" data-value="10">10</div>
    <div class="chip" data-value="50">50</div>
    <div class="chip" data-value="100">100</div>
    <div class="chip" data-value="1000">1000</div>
    <div class="chip" data-value="10000">10000</div>
  </div>

  <div id="totalBetDisplay" style="margin-top: 10px; font-weight: bold;">T·ªïng c∆∞·ª£c: 0</div>
</form>
</div>


<div class="right-panel">
<h1>üíéJackpotüíé</h1>
<div class="time-display"> SƒÉn h≈© tr√∫ng l·ªõn</div>

  <div class="wallet">
<div id="stats" style="margin-top: 10px; font-weight: bold; color: #ffc107;">
  üìä L√£i: 0 xu | L·ªó: 0 xu
  </div>
    <div> <h3>üí∞S·ªë d∆∞ xu: <span id="balance">0</span> <h3>
    <h3>üí∞ Jackpot: <span id="jackpot">0</span></h3>
    <progress id="jackpotProgress" max="5000" value="0" style="width: 100%;"></progress>
    </div>
    <div>
    <input type="number" id="amount" placeholder="Nh·∫≠p s·ªë xu mu·ªën n·∫°p">
      <button onclick="confirmDeposit()">N·∫°p xu</button>
      <button id="withdrawBtn" onclick="confirmWithdraw()">R√∫t xu</button>
    </div> <br>

    <div class="notification" id="notification"></div>
  </div>

 
  
  <div class="history" id="betHistory">üßæ <b>L·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c:</b><br></div>

<div id="bankInfo" style="display:none; margin-top:15px; text-align:left;">
  <h3>üè¶ Th√¥ng tin n·∫°p ti·ªÅn</h3>
  <p><b>Ng√¢n h√†ng:</b> Techcombank</p>
  <p><b>S·ªë t√†i kho·∫£n:</b> 9436789999</p>
  <p><b>Ch·ªß t√†i kho·∫£n:</b> Phan VƒÉn Tu·∫•n</p>
  <p><b>N·ªôi dung:</b> NAP KimDogCat</p>
  <p id="depositStatus" style="color:orange; font-weight:bold; margin-top:10px;">B·∫•m g·ª≠i y√™u c·∫ßu n·∫°p sau khi chuy·ªÉn kho·∫£n.</p>
  <button onclick="sendDepositRequest()">üì® G·ª≠i y√™u c·∫ßu n·∫°p</button>
</div>


<div id="withdrawPanel" style="display:none; background:#222; color:white; padding:20px; border-radius:10px;">
  <h3>Th√¥ng tin r√∫t xu</h3>
  <label>T√™n ng∆∞·ªùi d√πng:</label><br>
  <input type="text" id="userName" placeholder="Nh·∫≠p t√™n ch·ªß t√†i kho·∫£n"><br><br>

  <label>T√™n ng√¢n h√†ng:</label><br>
  <input type="text" id="bankName" placeholder="Nh·∫≠p t√™n ng√¢n h√†ng"><br><br>
  
  <label>S·ªë t√†i kho·∫£n:</label><br>
  <input type="text" id="userAccount" placeholder="Nh·∫≠p s·ªë t√†i kho·∫£n"><br><br>
  
  <label>S·ªë xu mu·ªën r√∫t:</label><br>
  <input type="number" id="withdrawAmount" placeholder="Nh·∫•p s·ªë xu"><br><br>
  
  <button id="confirmWithdraw">G·ª≠i y√™u c·∫ßu r√∫t xu</button>
  <p id="withdrawStatus"></p>
</div>


<audio id="spinSound" src="spin.mp3"></audio>
<audio id="winSound" src="win.mp3"></audio>
<audio id="bigWinSound" src="bigwin.mp3"></audio>



</div>


<!-- Modal x√°c nh·∫≠n r√∫t xu -->
<div id="withdrawConfirmModal" class="modal" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000;">
  <div style="background:#222; color:#fff; padding:20px; border-radius:12px; text-align:center; width:320px;">
    <h3>‚ö†Ô∏è X√°c nh·∫≠n r√∫t xu</h3>
    <p id="withdrawConfirmText">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën r√∫t ... xu?</p>
    <div style="margin-top:15px; display:flex; justify-content:space-around;">
      <button id="confirmYes" style="padding:8px 16px; background:green; color:#fff; border:none; border-radius:8px;">X√°c nh·∫≠n</button>
      <button id="confirmNo" style="padding:8px 16px; background:red; color:#fff; border:none; border-radius:8px;">H·ªßy</button>
    </div>
  </div>
</div>


<script>

let countdownDuration = 35; // s·ªë gi√¢y m·ªói phi√™n
let lastSpinTime = parseInt(localStorage.getItem("lastSpinTime")) || Date.now();
let pauseAfterSpin = false;
let pauseTimer = 0;
let autoInterval;


let spinCount = parseInt(localStorage.getItem("spinCount")) || 0;
let wheelRotation = 0;
let spinInterval;
let isSpinning = false;
// L·∫•y balance t·ª´ localStorage (n·∫øu c√≥)
let balance = parseInt(localStorage.getItem("balance")) || 0;
let jackpot = 0;
let netProfit = parseInt(localStorage.getItem("netProfit")) || 0; // Ch√™nh l·ªách xu l·ªùi
let netLoss = parseInt(localStorage.getItem("netLoss")) || 0;   // Ch√™nh l·ªách xu l·ªó
let currentChip = 0; // chip ƒëang ch·ªçn
let bets = {}; // l∆∞u s·ªë xu ƒë·∫∑t c∆∞·ª£c theo t·ª´ng c·ª≠a


const balanceEl = document.getElementById("balance");
const jackpotEl = document.getElementById("jackpot");
const notificationEl = document.getElementById("notification");
const historyEl = document.getElementById("history");
const betHistoryEl = document.getElementById("betHistory");
const JACKPOT_THRESHOLD = 5000;
const JACKPOT_CHANCE = 0.01;
const wheelEl = document.getElementById("wheel");
const options = [
  { name: "Chua", icon: "üçÖ", weight: 19.2, reward: 5 },
  { name: "C·∫£i", icon: "ü•¨", weight: 19.2, reward: 5 },
  { name: "Ng√¥", icon: "üåΩ", weight: 19.2, reward: 5 },
  { name: "R·ªët", icon: "ü•ï", weight: 19.2, reward: 5 },
  { name: "M·ª≥", icon: "üå≠", weight: 10, reward: 10 },
  { name: "Xi√™n", icon: "üç¢", weight: 6.67, reward: 15 },
  { name: "ƒê√πi", icon: "üçñ", weight: 4, reward: 25 },
  { name: "B√≤", icon: "ü•©", weight: 2.53, reward: 45 },
];


document.querySelectorAll('#betForm input').forEach(input => {
input.addEventListener('input', updateTotalBetDisplay);
});


// N·∫øu ch∆∞a c√≥ th√¨ set m·ªëc ban ƒë·∫ßu
if (!lastSpinTime) {
  lastSpinTime = Date.now();
  localStorage.setItem("lastSpinTime", lastSpinTime);
}

// T√≠nh th·ªùi gian c√≤n l·∫°i khi load l·∫°i trang
  function getRemainingTime() {
  const now = Date.now();
  const elapsed = Math.floor((now - lastSpinTime) / 1000); // s·ªë gi√¢y ƒë√£ tr√¥i qua
  let remaining = countdownDuration - elapsed;
  if (remaining <= 0) {
  // N·∫øu h·∫øt gi·ªù th√¨ b·∫Øt ƒë·∫ßu phi√™n m·ªõi
  lastSpinTime = now;
  localStorage.setItem("lastSpinTime", lastSpinTime);
  remaining = countdownDuration;
  }
  return remaining;
}

let countdownValue = getRemainingTime();
 

  // Hi·ªÉn th·ªã ƒë·∫øm ng∆∞·ª£c
  function startCountdown() {
  const timer = setInterval(() => {
  const countdownEl = document.getElementById("autoCountdown");
// N·∫øu ƒëang trong th·ªùi gian ch·ªù sau khi quay
  if (pauseAfterSpin) {
  if (pauseTimer > 0) {
  countdownEl.innerHTML = `‚è≥ ƒêang ch·ªù k·∫øt qu·∫£... <span>${pauseTimer}</span> gi√¢y`;
  countdownEl.classList.add("blink-yellow"); // v√†ng nh·∫•p nh√°y
  pauseTimer--;
  } 
  else {
  countdownValue = 35; // reset v·ªÅ 35 gi√¢y
  pauseAfterSpin = false;
  countdownEl.classList.remove("blink-yellow");
  countdownEl.innerHTML = `‚è≥ Quay th∆∞·ªüng sau: <span id="countdownValue">${countdownValue}</span> gi√¢y`;
  }
  return;
  }
  countdownValue--;
  countdownEl.textContent = `‚è≥ Quay th∆∞·ªüng sau: ${countdownValue} gi√¢y`;
  if (countdownValue === 20) {
    suggestResult();
  }
  if (countdownValue <= 5) {
  countdownEl.classList.add("blink"); // ƒë·ªè nh·∫•p nh√°y
  } 
  else {
  countdownEl.classList.remove("blink");
  }
  countdownEl.innerHTML = `‚è≥ Quay th∆∞·ªüng sau: <span id="countdownValue">${countdownValue}</span> gi√¢y`;

  if (countdownValue <= 0) {
  if (!isSpinning) {
  spinWheel(); // quay lu√¥n d√π kh√¥ng c∆∞·ª£c
  }
// Sau khi quay th√¨ pause 4 gi√¢y
  pauseAfterSpin = true;
  pauseTimer = 4;
  countdownEl.classList.remove("blink"); // t·∫Øt ƒë·ªè nh·∫•p nh√°y
  
  lastSpinTime = Date.now();
  localStorage.setItem("lastSpinTime", lastSpinTime);
  countdownValue = countdownDuration;
  }
  countdownEl.innerHTML = `‚è≥ Quay th∆∞·ªüng sau: <span id="countdownValue">${countdownValue}</span> gi√¢y`;
  }, 1000);
}
startCountdown();

  function suggestResult() {
  const totalWeight = options.reduce((sum, opt) => sum + opt.weight, 0);
  let rand = Math.random() * totalWeight;
  let cumWeight = 0;
  for (let opt of options) {
  cumWeight += opt.weight;
  if (rand <= cumWeight) {
  document.getElementById("suggestion").textContent =
  `üî• Hot: ${opt.name} ${opt.icon}`;
  return;
  }
  }
}

  function updateBalance() {
  document.getElementById("balance").textContent = balance;
}

// Hi·ªÉn th·ªã giao di·ªán r√∫t xu
  document.getElementById("withdrawBtn").onclick = () => {
  document.getElementById("withdrawPanel").style.display = "block";
};




// X·ª≠ l√Ω r√∫t xu
  document.getElementById("confirmWithdraw").onclick = () => {
  const name = document.getElementById("userName").value;
  const account = document.getElementById("userAccount").value;
  const amount = parseInt(document.getElementById("withdrawAmount").value);
  const status = document.getElementById("withdrawStatus");
  const modal = document.getElementById("withdrawConfirmModal");
  const confirmText = document.getElementById("withdrawConfirmText");

  if (!name || !account || !amount || amount <= 0) {
    status.textContent = "‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin h·ª£p l·ªá.";
    status.style.color = "red";
    return;
  }

  if (amount > balance) {
    status.textContent = "‚ö†Ô∏è S·ªë d∆∞ kh√¥ng ƒë·ªß ƒë·ªÉ r√∫t.";
    status.style.color = "red";
    return;
  }

// Hi·ªÉn th·ªã modal x√°c nh·∫≠n
   confirmText.textContent = `B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën r√∫t ${amount} xu kh√¥ng?`;
   modal.style.display = "flex";

// N·∫øu b·∫•m H·ªßy
   document.getElementById("confirmNo").onclick = () => {
   modal.style.display = "none";
   status.textContent = "‚ùå Y√™u c·∫ßu r√∫t ƒë√£ b·ªã h·ªßy.";
   status.style.color = "red";
};

// N·∫øu b·∫•m X√°c nh·∫≠n
   document.getElementById("confirmYes").onclick = () => {
   modal.style.display = "none";

// Tr·ª´ xu sau khi x√°c nh·∫≠n
   balance -= amount;
   updateBalance();

// Hi·ªán th√¥ng b√°o ch·ªù x·ª≠ l√Ω
   let timeLeft = 35;
   status.style.color = "orange";
   status.textContent = `‚è≥ G·ª≠i y√™u c·∫ßu th√†nh c√¥ng, h·ªá th·ªëng ƒëang x·ª≠ l√Ω...`;

   const countdown = setInterval(() => {
   timeLeft--;
   status.textContent = `‚è≥ G·ª≠i y√™u c·∫ßu th√†nh c√¥ng, h·ªá th·ªëng ƒëang x·ª≠ l√Ω...`;
   if (timeLeft <= 0) {
   clearInterval(countdown);



   status.textContent = `Y√™u c·∫ßu r√∫t xu ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát!`;
   status.style.color = "lightgreen";
   document.getElementById("notification").textContent = `R√∫t xu th√†nh c√¥ng, ti·ªÅn ƒëang ƒë∆∞·ª£c chuy·ªÉn t·ªõi t√†i kho·∫£n, vui l√≤ng ƒë·ª£i!`;
// ·∫®n giao di·ªán sau 5s
   setTimeout(() => {
   document.getElementById("withdrawPanel").style.display = "none";
   status.textContent = "";
   }, 5000);
   }
   }, 1000);
   };
};

  function showBankInfo() {
  const amount = parseInt(document.getElementById("amount").value) || 0;
  if (amount > 0) {
  document.getElementById("bankInfo").style.display = "block";
  document.getElementById("depositStatus").textContent = 'B·∫•m g·ª≠i y√™u c·∫ßu n·∫°p sau khi chuy·ªÉn kho·∫£n.';
  } else {
  alert("Vui l√≤ng nh·∫≠p s·ªë xu mu·ªën n·∫°p!");
  }
}

  function sendDepositRequest() {
  const amount = parseInt(document.getElementById("amount").value) || 0;
  if (amount > 0) {
  if (confirm(` X√°c nh·∫≠n chuy·ªÉn kho·∫£n th√†nh c√¥ng !`)) {
  // Hi·ªán th√¥ng tin ng√¢n h√†ng
  document.getElementById("bankInfo").style.display = "block";
  // Tr·∫°ng th√°i ch·ªù
  const status = document.getElementById("depositStatus");
  let timeLeft = 35;  
  status.style.color = "orange";
  status.textContent = `‚è≥ G·ª≠i y√™u c·∫ßu th√†nh c√¥ng, h·ªá th·ªëng ƒëang x·ª≠ l√Ω...`;
  // ƒê·∫øm ng∆∞·ª£c 30s r·ªìi c·ªông xu
  const countdown = setInterval(() => {
  timeLeft--;
  if (timeLeft <= 0) {
  clearInterval(countdown);
  deposit(amount);
  status.textContent = `‚úÖ N·∫°p th√†nh c√¥ng ${amount} xu v√†o t√†i kho·∫£n!`;
  status.style.color = "lightgreen";
  document.getElementById("notification").textContent = `N·∫°p th√†nh c√¥ng +${amount} xu.`;

  // Sau 5 gi√¢y ·∫©n giao di·ªán ng√¢n h√†ng
  setTimeout(() => {
  document.getElementById("bankInfo").style.display = "none";
  }, 5000);
  }
  }, 1000);
  }
  } else {
  alert("Vui l√≤ng nh·∫≠p s·ªë xu mu·ªën n·∫°p!");
  }
}


  function updateBetDisplay() {
  document.querySelectorAll(".bet-box").forEach(box => {
  const name = box.dataset.name;
  box.querySelector(".bet-amount").textContent = bets[name];
  });
  const total = Object.values(bets).reduce((a,b)=>a+b,0);
  document.getElementById("totalBetDisplay").textContent = `T·ªïng c∆∞·ª£c: ${total}`;
}


  function updateJackpotDisplay() {
  jackpotEl.textContent = jackpot.toFixed(0);
}
 
  function updateBalanceDisplay() {
  balanceEl.textContent = balance;
  localStorage.setItem("balance", balance); // l∆∞u v√†o localStorage
}
   
  function showNotification(message) {
  notificationEl.textContent = message;
  setTimeout(() => notificationEl.textContent = "", 3000);
}

  function confirmDeposit() {
  const amount = parseInt(document.getElementById("amount").value) || 0;
  if (amount > 0 && confirm(`X√°c nh·∫≠n n·∫°p ${amount} xu?`)) {
  /*deposit(amount);*/
  showBankInfo();
  
// Hi·ªán th√¥ng tin ng√¢n h√†ng
  document.getElementById("bankInfo").style.display = "block";
  }
}

  function confirmWithdraw() {
  const amount = parseInt(document.getElementById("amount").value);
  const balanceEl = document.getElementById("balance");
  if (isNaN(amount) || amount <= 0) {
  alert("Vui l√≤ng nh·∫≠p s·ªë xu h·ª£p l·ªá ƒë·ªÉ r√∫t.");
  return;
  }
  if (amount > balance) {
  alert("Kh√¥ng th·ªÉ r√∫t xu v√¨ s·ªë d∆∞ kh√¥ng ƒë·ªß.");
  return;
  }
  if (confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën r√∫t ${amount} xu kh√¥ng?`)) {
  balance -= amount;
  balanceEl.textContent = balance;
  document.getElementById("notification").textContent = `R√∫t xu th√†nh c√¥ng -${amount}`;
  }
}

  function deposit(amount) {
  balance += amount;
  updateBalanceDisplay();
}
    
  function withdraw(amount) {
  balance -= amount;
  updateBalanceDisplay();
  showNotification(`-${amount} xu ƒë√£ ƒë∆∞·ª£c r√∫t.`);
}

  function confirmClearBetHistory() {
  if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a l·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c?")) {
  clearBetHistory();
  }
}
   
  function confirmClearResultHistory() {
  if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a l·ªãch s·ª≠ k·∫øt qu·∫£?")) {
  clearResultHistory();
  }
}

  function clearBetHistory() {
  betHistoryEl.innerHTML = "üßæ <b>L·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c:</b><br>";
}
    
  function clearResultHistory() {
  historyEl.innerHTML = "üå° <b>L·ªãch s·ª≠ k·∫øt qu·∫£:</b><br>";
}
    
  function renderWheel() {
  const angleStep = 360 / options.length;
  wheelEl.innerHTML = ""; // x√≥a c≈©
  options.forEach((opt, index) => {
  const segment = document.createElement("div");
  segment.className = "segment";
  segment.textContent = opt.icon;
  segment.style.transform = `rotate(${index * angleStep}deg) translate(0, -85%)`;
  wheelEl.appendChild(segment);
  });
}
  renderWheel();
    
/// H√†m th√™m k·∫øt qu·∫£ v√†o l·ªãch s·ª≠ (gi·ªØ t·ªëi ƒëa 12)
  function addResultToHistory(icon) {
  let Results = JSON.parse(localStorage.getItem("Results")) || [];

  // th√™m k·∫øt qu·∫£ m·ªõi v√†o ƒë·∫ßu m·∫£ng
  Results.unshift(icon);

  // gi·ªõi h·∫°n 8 k·∫øt qu·∫£
  if (Results.length > 8) {
    Results = Results.slice(0, 8);
  }

  // l∆∞u l·∫°i
  localStorage.setItem("Results", JSON.stringify(Results));

  // c·∫≠p nh·∫≠t hi·ªÉn th·ªã
  renderHistory();
}

// H√†m hi·ªÉn th·ªã l·ªãch s·ª≠ ra giao di·ªán
  function renderHistory() {
  const historyEl = document.getElementById("history");
  historyEl.innerHTML = "üßæ <b>L·ªãch s·ª≠ k·∫øt qu·∫£:</b><br>";
  let Results = JSON.parse(localStorage.getItem("Results")) || [];
  Results.forEach(icon => {
  const span = document.createElement("span");
  span.className = "result-item";
  span.textContent = icon + " ";
  historyEl.appendChild(span);
  });
}

// g·ªçi khi t·∫£i l·∫°i trang ƒë·ªÉ load l·ªãch s·ª≠ c≈©
  window.onload = () => {
  renderHistory();
  updateBalanceDisplay(); // c≈©ng load l·∫°i s·ªë d∆∞ ƒë√£ l∆∞u
};

  function spinWheel() {
  if (isSpinning) return;
  isSpinning = true;
  document.querySelectorAll('.chip, .bet-box').forEach(chip => chip.classList.add('lock-bets'));
  const resultEl = document.getElementById("result");
  let totalBet = Object.values(bets).reduce((a,b)=>a+b,0);
  for (let key in bets) {
  let val = parseFloat(bets[key]);
  if (isNaN(val) || val < 0) {
  resultEl.textContent = `‚ùå C∆∞·ª£c kh√¥ng h·ª£p l·ªá ·ªü c·ª≠a ${key}`;
  return;}
  }
  document.getElementById("spinSound").play();
  resultEl.classList.add("spin-animating");
  setTimeout(() => {
  resultEl.classList.remove("spin-animating");
  }, 3000);
  const spinDuration = 5; // gi√¢y
  let countdown = spinDuration;
  /*resultEl.textContent = `‚è≥ ƒê·∫øm ng∆∞·ª£c: ${countdown} gi√¢y...`;*/
  const selected = weightedRandom(options, bets);
  const anglePerSegment = 360 / options.length;
  const selectedIndex = options.findIndex(opt => opt.name === selected.name);
  const randomOffset = Math.random() * anglePerSegment; // gi√∫p k·∫øt qu·∫£ tr√¥ng t·ª± nhi√™n h∆°n
  const targetAngle = (360 - (selectedIndex * anglePerSegment + anglePerSegment / 2)%360);
  const extraSpins = 5;
  const targetRotation = 360 * extraSpins + targetAngle;
  wheelRotation += targetRotation;
  wheelEl.style.transform = `rotate(${wheelRotation}deg)`;
  const animationInterval = setInterval(() => {
  const tempIcon = options[Math.floor(Math.random() * options.length)].icon;
  resultEl.textContent = `${tempIcon}`;
  }, 100);
  const countdownInterval = setInterval(() => {
  countdown--;
  if (countdown <= 0) {
  clearInterval(countdownInterval);
  clearInterval(animationInterval);
  const betAmount = bets[selected.name] || 0;
  const winAmount = betAmount > 0 ? betAmount * selected.reward : 0;
  balance += winAmount;
  updateBalanceDisplay();
  const lostAmount = totalBet - winAmount;
  let profitOrLoss = winAmount - totalBet;
  
// T√≠ch l≈©y h≈© t·ª´ ph·∫ßn c∆∞·ª£c thua
  if (lostAmount > 0) {
  const jackpotContribution = Math.floor(lostAmount * 0.1); // 10% s·ªë xu thua
  jackpot += jackpotContribution;
  updateJackpotDisplay();
  }
  if (profitOrLoss > 0) {
  netProfit += profitOrLoss;
  } 
  else if (profitOrLoss < 0) {
  netLoss += Math.abs(profitOrLoss);
  }
  updateStatsDisplay();
  addResultToHistory(selected.icon);
  let outcome = winAmount > 0 ? `‚úÖ Th·∫Øng ${winAmount}` : `‚ùå Thua`;
  let jackpotWin = 0;
  if (jackpot >= JACKPOT_THRESHOLD && Math.random() < JACKPOT_CHANCE) {
  jackpotWin = Math.floor(jackpot * 0.8);
  jackpot -= jackpotWin;
  balance += jackpotWin;
  updateBalanceDisplay();
  updateJackpotDisplay();
  outcome += ` üéâ N·ªï h≈©! Nh·∫≠n th√™m ${jackpotWin} xu t·ª´ h≈©!`;
  showJackpotEffect();  // Hi·ªÉn th·ªã hi·ªáu ·ª©ng ph√°o hoa + coin bay
  }
  if (totalBet > 0) {
  resultEl.textContent = `${selected.icon} - ${outcome}`;
  } 
  else {
  resultEl.textContent = `${selected.icon}`;
  }
// B·∫≠t s√°ng c·∫£ √¥ ƒë·∫∑t c∆∞·ª£c tr√∫ng
  const betBox = document.querySelector(`.bet-box[data-name="${selected.name}"]`);
  if (betBox) {
  betBox.classList.add('highlight-win');
  setTimeout(() => {
  betBox.classList.remove('highlight-win');
  document.querySelectorAll('.chip, .bet-box').forEach(chip => chip.classList.remove('lock-bets'));
//TƒÉng s·ªë phi√™n quay.
  spinCount++;
  document.getElementById("spinCounter").textContent = `üéØ Phi√™n quay: ${spinCount}`;
  updateSpinCounter();
//Reset c∆∞·ª£c.
  resetBets();
  isSpinning = false;
  }, 5000);
  }
  if (winAmount >= 1000) {
  resultEl.classList.add("big-win-effect");
  } 
  else if (winAmount > 0) {
  resultEl.classList.add("small-win-effect");
  }
  setTimeout(() => {
  resultEl.classList.remove("big-win-effect", "small-win-effect");
  }, 2000);
  if (totalBet > 0) {
  let betLog = `${new Date().toLocaleTimeString()} - C∆∞·ª£c: `;
  for (let key in bets) {
  const val = parseFloat(bets[key]) || 0;
  if (val > 0) betLog += `${key}: ${val} xu, `;
  }
  betLog += `‚Üí K·∫øt qu·∫£: ${selected.name} ${selected.icon} - ${outcome}`;
  betHistoryEl.innerHTML += `üßæ ${betLog}<br>`;
  }
  }
  }, 1000);
}

  // H√†m c·∫≠p nh·∫≠t giao di·ªán + l∆∞u
  function updateSpinCounter() {
  document.getElementById("spinCounter").textContent = `üéØ Phi√™n quay: ${spinCount}`;
  localStorage.setItem("spinCount", spinCount);
  localStorage.setItem("lastSpinDate", getToday());
}

// Khi load trang th√¨ hi·ªÉn th·ªã s·ªë phi√™n ƒë√£ l∆∞u
  updateSpinCounter();


  function weightedRandom(items,bets) {
  const adjustedItems = items.map(item => {
  const betAmount = parseFloat(bets[item.name]) || 0;        
  let penaltyFactor = 1;
  if (betAmount > 0) {
  penaltyFactor = Math.max(0.2, 1 / (1 + betAmount / 10000000));
  }
  return { ...item, weight: item.weight * penaltyFactor };
  });
  const totalWeight = adjustedItems.reduce((sum, item) => sum + item.weight, 0);
  let rand = Math.random() * totalWeight;
  let cumWeight = 0;
  for (let item of adjustedItems) {
  cumWeight += item.weight;
  if (rand <= cumWeight) {
  return item;
  }
  }
}

  function confirmSpin() {
  const form = document.getElementById("betForm");
  const formData = new FormData(form);
  let totalBet = 0;
  for (const [key, value] of formData.entries()) {
    totalBet += parseInt(value || 0);
  }
  if (totalBet <= 0) {
    alert("Vui l√≤ng ƒë·∫∑t c∆∞·ª£c tr∆∞·ªõc khi quay.");
    return;
  }
  if (confirm(`T·ªïng s·ªë xu ƒë√£ ƒë·∫∑t c∆∞·ª£c: ${totalBet}.\nB·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën quay th∆∞·ªüng?`)) {
   spinWheel();
  }
  }

/*//auto quay
  let autoTime = 35;
  let autoInterval;
  let pauseAfterSpin = false;
  let pauseTimer = 0;

  function startAutoSpinTimer() {
  autoInterval = setInterval(() => {
  const countdownEl = document.getElementById("autoCountdown");
// N·∫øu ƒëang trong th·ªùi gian ch·ªù sau khi quay
  if (pauseAfterSpin) {
  if (pauseTimer > 0) {
  countdownEl.textContent = `‚è≥ ƒêang ch·ªù k·∫øt qu·∫£... ${pauseTimer}s`;
  countdownEl.classList.add("blink-yellow"); // v√†ng nh·∫•p nh√°y
  pauseTimer--;
  } 
  else {
  autoTime = 35; // reset v·ªÅ 35 gi√¢y
  pauseAfterSpin = false;
  countdownEl.classList.remove("blink-yellow");
  countdownEl.textContent = `‚è≥ Quay th∆∞·ªüng sau: ${autoTime} gi√¢y`;
  }
  return;
  }
// B√¨nh th∆∞·ªùng ƒë·∫øm ng∆∞·ª£c 35s
  autoTime--;
  countdownEl.textContent = `‚è≥ Quay th∆∞·ªüng sau: ${autoTime} gi√¢y`;
  if (autoTime === 20) {
    suggestResult();
  }
  if (autoTime <= 5) {
  countdownEl.classList.add("blink"); // ƒë·ªè nh·∫•p nh√°y
  } 
  else {
  countdownEl.classList.remove("blink");
  }
  if (autoTime <= 0) {
  if (!isSpinning) {
  spinWheel(); // quay lu√¥n d√π kh√¥ng c∆∞·ª£c
  }
// Sau khi quay th√¨ pause 4 gi√¢y
  pauseAfterSpin = true;
  pauseTimer = 4;
  countdownEl.classList.remove("blink"); // t·∫Øt ƒë·ªè nh·∫•p nh√°y
  }
  }, 1000);
}*/

  window.onload = function() {
  updateBalanceDisplay();
  updateJackpotDisplay();
  startAutoSpinTimer();
};

  function showJackpotEffect() {
  const container = document.getElementById("jackpotEffect");
  container.innerHTML = "";
// Coin bay xi√™n
  for (let i = 0; i < 20; i++) {
  const coin = document.createElement("div");
  coin.className = "coin";
  const x = `${(Math.random() - 0.5) * 300}px`;
  const y = `${-150 - Math.random() * 200}px`;
  coin.style.left = `${50 + Math.random() * 30 - 15}%`;
  coin.style.bottom = `0`;
  coin.style.setProperty('--x', x);
  coin.style.setProperty('--y', y);
  container.appendChild(coin);
  }
// Fireworks nhi·ªÅu m√†u
  const colors = ['#ff0', '#f0f', '#0ff', '#f55', '#5f5', '#55f', '#ffa500'];
  for (let i = 0; i < 10; i++) {
  const fw = document.createElement("div");
  fw.className = "firework";
  fw.style.left = `${40 + Math.random() * 20}%`;
  fw.style.top = `${30 + Math.random() * 30}%`;
  fw.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);
  container.appendChild(fw);
  }
// M∆∞a xu
  for (let i = 0; i < 30; i++) {
  const rain = document.createElement("div");
  rain.className = "rain-coin";
  rain.style.left = `${Math.random() * 100}%`;
  rain.style.animationDuration = `${2 + Math.random() * 2}s`;
  rain.style.animationDelay = `${Math.random() * 0.5}s`;
  container.appendChild(rain);
  }
  // Xo√° hi·ªáu ·ª©ng sau 3 gi√¢y
  setTimeout(() => container.innerHTML = "", 3000);
}

  function updateTimeDisplay() {
  const now = new Date();
  const timeString = now.toLocaleTimeString('vi-VN', { hour12: false });
  document.getElementById("currentTime").textContent = timeString;
}
  setInterval(updateTimeDisplay, 1000);
  updateTimeDisplay(); // ch·∫°y ngay khi load

  function updateStatsDisplay() {
  document.getElementById("stats").textContent =
  `üìä L√£i: ${netProfit} xu | L·ªó: ${netLoss} xu`;
  localStorage.setItem("netProfit", netProfit);
  localStorage.setItem("netLoss", netLoss);
}
  updateStatsDisplay(); // g·ªçi 1 l·∫ßn khi load trang

  function resetStats() {
  if (confirm("Reset th·ªëng k√™ l√£i/l·ªó?")) {
  netProfit = 0;
  netLoss = 0;
  updateStatsDisplay();
  }
}

  function updateJackpotDisplay() {
  jackpotEl.textContent = jackpot.toFixed(0);
  document.getElementById("jackpotProgress").value = jackpot;
}

  if (jackpot >= JACKPOT_THRESHOLD) {
  document.querySelector('button[onclick="confirmSpin()"]').classList.add('glow');
}


// --- CHIP CH·ªåN TI·ªÄN C∆Ø·ª¢C ---

// Kh·ªüi t·∫°o c∆∞·ª£c = 0 cho t·∫•t c·∫£
  document.querySelectorAll(".bet-box").forEach(box => {
  bets[box.dataset.name] = 0;
});


// --- ch·ªçn chip ---
  document.querySelectorAll(".chip").forEach(chip => {
  chip.addEventListener("click", () => {
  document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
  chip.classList.add("active");
  currentChip = parseInt(chip.dataset.value);
  });
});

// --- ƒë·∫∑t c∆∞·ª£c b·∫±ng click √¥ ---
  document.querySelectorAll(".bet-box").forEach(box => {
  box.addEventListener("click", () => {
  if (!currentChip) {
  alert("H√£y ch·ªçn m·ªánh gi√° chip tr∆∞·ªõc!");
  return;
  }
  if (balance < currentChip) {
  alert("Kh√¥ng ƒë·ªß s·ªë d∆∞ ƒë·ªÉ ƒë·∫∑t c∆∞·ª£c!");
  return;
  }
  const name = box.dataset.name;
  bets[name] += currentChip;
  balance -= currentChip;
  updateBalanceDisplay();
  updateBetDisplay();
  });
});

// --- reset c∆∞·ª£c ---
  function resetBets() {
  for (let k in bets) bets[k] = 0;
  updateBetDisplay();
}

// L·∫•y ng√†y hi·ªán t·∫°i (yyyy-mm-dd)
  function getToday() {
  let d = new Date();
  return d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();
}

// L·∫•y ng√†y cu·ªëi c√πng l∆∞u trong localStorage
  let lastDate = localStorage.getItem("lastSpinDate");

// N·∫øu kh√°c ng√†y ‚Üí reset v·ªÅ 0
  if (lastDate !== getToday()) {
  spinCount = 0;
  localStorage.setItem("spinCount", spinCount);
  localStorage.setItem("lastSpinDate", getToday());
}


</script>
<div id="jackpotEffect"></div>

</body>
</html>